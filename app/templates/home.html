{% extends 'base.html' %}

{% block content %}

<div class="container is-max-desktop px-3 pt-2">

    <header>
        <h1 class="title has-text-centered">
            Pass Predict
        </h1>
        <h3 class="subtitle has-text-centered">
            See a Satellite!
        </h3>
    </header>

    <form id="passes-form" autocomplete="off" method="POST" action="{{ url_for('home') }}">
        <div x-data="locationSearch()" id="locationSearch" class="field">
            <label for="locationSearch">Location</label>
            <input
                x-model="query"
                name="locationQuery"
                x-on:input.debounce="fetchLocations()"
                type="search"
                class="input"
                placeholder="New York, NY"
            />
            <ul
                id="autocomplete-result-list"
                x-show="(data) && (data.length > 0)"
            >
                <template x-for="item in data">
                    <li x-text="item.name"></li> <!-- </li> x-on:click="selectedIndex = index"> -->
                </template>
            </ul>
            <input type="hidden" name="lat" x-bind:value="data[selectedIndex].lat" />
            <input type="hidden" name="lon" x-bind:value="data[selectedIndex].lon" />
            <input type="hidden" name="h" x-bind:value="data[selectedIndex].h" />
            <input type="hidden" name="name" x-bind:value="data[selectedIndex].name" />
        </div>

        <div class="field">
            <label for="satid" class="label">Select satellite</label>
            <div class="control">
                <div class="select mt-0">
                    <select name="satid">
                        {% for satellite in satellites %}
                            <option value={{ satellite.id }}>{{ satellite.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>

        <div class="buttons">
            <button id="submit" type="submit" class="button is-primary mr-5">Submit</button>
            <button id="reset" type="reset" class="button is-info">Reset</button>
        </div>
    </form>

    <footer class="footer-container">
        <div class="footer-item">
            <a href="{{ url_for('about') }}">About</a>
        </div>
    </footer>

</div>
{% endblock content %}

{% block javascript %}
<script src="{{ url_for('static', filename='dist/home.js') }}"></script>
{% endblock javascript %}